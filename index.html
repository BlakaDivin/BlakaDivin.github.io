<!doctype html>
<html lang="en" dir="ltr"
    class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-about-alg">

<head>

    <meta charset="UTF-8">
    <meta name="generator" content="Docusaurus v2.4.1">
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <title data-rh="true">Funtoo's Wiki</title>

    <meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1">
    <meta data-rh="true" name="description" content="Funtoo Wiki.">
    <meta data-rh="true" property="og:description" content="A brief wiki about Funtoo.">
    <meta data-rh="true" name="keywords" content="funtoo,blakadiv">

    <link rel="search" type="application/opensearchdescription+xml" title="Funtoo's Wiki">
    <link rel="stylesheet" href="mainstyle.css">
</head>

<main class="docMainContainer_gTbr">
    <div class="container padding-top--md padding-bottom--lg">
        <div class="row">
            <div class="col docItemCol_VOVn">
                <div class="docItemContainer_Djhp">
                    <article>
                        <nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs">
                            <ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList">

                                <li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link"
                                        href="index.html"><svg viewbox="0 0 24 24" class="breadcrumbHomeIcon_YNFT">
                                            <path
                                                d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z"
                                                fill="currentColor"></path>
                                        </svg></a></li>
                                <li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem"
                                    class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link"
                                        itemprop="name">Funtoo's Wiki</span>
                                    <meta itemprop="position" content="1">
                                </li>
                            </ul>
                        </nav>

                        <div class="theme-doc-markdown markdown">
                            <h1>Funtoo's Wiki</h1>
                            <p>Welcome to the Funtoo's Wiki, you will find helpful stuff here. </p>
                            <p>This wiki is here to help you with Funtoo.</p>
                            <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                <div class="admonitionHeading_tbUL"><span
                                        class="admonitionIcon_kALy">📢</span>ANNOUNCEMENT</div>
                                <div class="admonitionContent_S0QG">
                                    <p>
                                        The goal of this Wiki is to use Funtoo even after it's transition to hobby
                                        mode.<br><br>
                                        This Wiki will use new UNOFFICIAL repos hosted on github.<br>
                                        <br>
                                        Hopefully you will benefit from the informations here and keep enjoying Funtoo
                                        for the next years, that is the only goal of this wiki.<br>
                                        <br>
                                        <a href="https://github.com/BlakaDivin">BlakaDivin, 26 April 2025, France.</a>




                                    </p>
                                </div>
                            </div>

                            <hr>
                            <h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update">Update and Upgrade<a
                                    href="#update" class="hash-link" aria-label="Direct link to update"
                                    title="Direct link to update">​</a></h2>
                            <p>Considering you already got Funtoo installed, it is now time to update your repos and
                                upgrade your system.<br>
                                <br>
                                <code>echo 'sync_base_url=https://github.com/funtoo-repo/{repo}' >> /etc/ego.conf</code><br><br>
                                <code>echo 'GENTOO_MIRRORS=https://direct-github.funmore.org' >> /etc/portage/make.conf</code><br><br>
                                <code>rm -rf /var/git/meta-repo</code><br><br>
                                <code>ego sync && emerge -DuavNA @world && emerge --depclean</code><br>
                                <hr>

                            <h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="install">Installation<a
                                    href="#install" class="hash-link" aria-label="Direct link to install"
                                    title="Direct link to install">​</a></h2>

                            Here's a small guide (20 Steps) to install Funtoo (26 April 2025)<br>
                            <br>

                            For a French keyboard:
                            <code>loadkeys fr</code><br>

                            For wifi connection: <code>nmtui</code><br>
                            <br>
                            <b>1. Setting up the Disks</b><br>
                            <br>
                            <code>lsblk</code><br>

                            <code> cfdisk /dev/nvme0n1</code> or <code> cfdisk /dev/sda</code><br><br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>Disk
                                        Setup</div>
                                    <div class="admonitionContent_S0QG">
                                        <b>First parition: 1G (EFI System)</b><br>
                                        <b>Second partition: 70G+ (Linux File System)</b><br>
                                        <b> Third partition: 8G+ (Linux Swap)</b><br>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <b>2. Formatting the Disks</b><br>
                            <br>
                            <code>lsblk</code><br>
                            <code>mkfs.fat -F 32 /dev/nvme0n1p1</code><br>
                            <code>mkfs.ext4 /dev/nvme0n1p2</code><br>
                            <code>mkswap /dev/nvme0n1p3</code><br>
                            <code>swapon /dev/nvme0n1p3</code><br>
                            <br>

                            <b>3. Mounting the Disks</b><br>
                            <br>

                            <code>mkdir -p /mnt/funtoo</code><br>
                            <code>mount /dev/nvme0n1p2 /mnt/funtoo</code><br>
                            <code>mkdir /mnt/funtoo/boot</code><br>
                            <code>mount /dev/nvme0n1p1 /mnt/funtoo/boot</code><br>
                            <br>

                            <b>4. Synching the clock</b><br>
                            <br>
                            <code>hwclock --systohc</code><br>
                            <br>

                            <b>5. Downloading a gnome stage 3</b><br>
                            <br>
                            <code>cd /mnt/funtoo</code><br>
                            <br>
                            Method 1:
                            <code>wget https://metro.funmore.org/next/x86-64bit/generic_64/2025-04-23/gnome-light-workstation-stage3-generic_64-next-2025-04-23.tar</code><br>
                            <br>

                            Method 2: <code>links https://metro.funmore.org</code><br>
                            <br>

                            <b>6. Unpacking your gnome stage 3</b><br>
                            <br>
                            <code>tar --numeric-owner --xattrs --xattrs-include='*' -xpf gnome*</code><br>
                            <br>

                            <b>7. Time to chroot</b><br>
                            <br>
                            Method 1: <code>fchroot /mnt/funtoo</code><br>
                            <br>
                            Method 2:
                            <code>cd /mnt/funtoo</code><br>
                            <code>mount --rbind /proc proc</code><br>
                            <code>mount --rbind /sys sys</code><br>
                            <code>mount --rbind /dev dev</code><br>
                            <code>cp /etc/resolv.conf /mnt/funtoo/etc/</code><br>
                            <code>chroot . /bin/su --login</code><br>
                            <br>

                            <b>8. Download the tree</b><br>
                            <br>
                            <code>ping www.google.com</code><br>
                            <br>
                            Update your repos first!<br>
                            <br>
                            <code>echo 'sync_base_url=https://github.com/funtoo-repo/{repo}' >> /etc/ego.conf</code><br><br>
                            <code>echo 'GENTOO_MIRRORS=https://direct-github.funmore.org' >> /etc/portage/make.conf</code><br><br>
                            <code>rm -rf /var/git/meta-repo</code><br><br>
                            <code>ego sync</code><br>
                            <br>

                            <b>9. Edit profile</b><br>
                            <br>
                            <code> epro show</code><br>
                            <br>
                            <code>epro flavor desktop</code><br>
                            <br>
                            OPTIONAL: <code>epro subarch amd64-zen2</code><br>
                            <br>

                            <b>10. Update Funtoo</b><br>
                            <br>
                            <code>emerge -DuavNA @world && emerge --depclean</code><br>
                            <br>

                            <b>11. Create fstab</b><br>
                            <br>
                            <code>nano -w /etc/fstab</code><br>
                            <br>
                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>Fstab
                                        Setup</div>
                                    <div class="admonitionContent_S0QG">
                                        <b>/dev/nvme0n1p1&nbsp;&nbsp;&nbsp;&nbsp; /boot&nbsp;&nbsp;&nbsp;&nbsp;
                                            vfat&nbsp;&nbsp;&nbsp;&nbsp; noauto,noatime 1 2</b><br>
                                        <b>/dev/nvme0n1p2&nbsp;&nbsp;&nbsp;&nbsp;
                                            /&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            ext4&nbsp;&nbsp;&nbsp;&nbsp; noatime 0 1</b><br>
                                        <b>/dev/nvme0n1p3 &nbsp;&nbsp;&nbsp;&nbsp; none&nbsp;&nbsp;&nbsp;&nbsp;
                                            swap&nbsp;&nbsp;&nbsp;&nbsp; sw 0 0</b>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <b>12. Setting locales</b><br>
                            <br>

                            <code>nano -w /etc/locale.gen</code><br>
                            <br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span
                                            class="admonitionIcon_kALy">📢</span>Locale Setup</div>
                                    <div class="admonitionContent_S0QG">
                                        <b>en_US.UTF-8 UTF-8</b><br>
                                        <b>fr_FR.UTF-8 UTF-8</b><br>
                                    </div>
                                </div>
                            </div>
                            <br>


                            <code>locale-gen</code><br>
                            <br>
                            <code>eselect locale list</code><br>
                            <br>
                            EXAMPLE: <code>eselect locale set 5</code><br>
                            <br>

                            <b>13. Setting keymap</b><br>
                            <br>

                            <code>nano -w /etc/conf.d/keymaps</code><br>
                            <br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span
                                            class="admonitionIcon_kALy">📢</span>French keyboard Setup</div>
                                    <div class="admonitionContent_S0QG">
                                        <b>keymap="fr"</b><br>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>US
                                        keyboard Setup</div>
                                    <div class="admonitionContent_S0QG">
                                        <b>keymap="us"</b><br>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <b>14. Setting hostname</b><br>
                            <br>

                            <code>nano /etc/conf.d/hostname</code><br>
                            <br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span
                                            class="admonitionIcon_kALy">📢</span>Hostname Setup</div>
                                    <div class="admonitionContent_S0QG">
                                        <b>hostname="funtoo"</b><br>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <b>15. Setting Grub</b><br>
                            <br>

                            <code>mount -o remount,rw /sys/firmware/efi/efivars</code><br>
                            <br>
                            <code>grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id="Funtoo Linux [GRUB]" --recheck</code><br>
                            <br>
                            <code>ego boot update</code><br>
                            <br>

                            <b>16. Setting Users</b><br>
                            <br>

                            <code>passwd</code><br>

                            <code>useradd -m div</code><br>

                            <code>usermod -G wheel,audio,video,plugdev,portage div</code><br>

                            <code>passwd div</code><br>
                            <br>


                            <b>17. Final steps</b><br>
                            <br>

                            <code>emerge  sys-kernel/debian-sources sys-apps/busybox</code><br>
                            <br>
                            <code>ramdisk /tmp/initramfs</code><br>
                            <br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>CHECK
                                        KERNEL version</div>
                                    <div class="admonitionContent_S0QG">
                                        <code>emerge -s debian-sources</code><br>
                                    </div>
                                </div>
                            </div>
                            <br>
                            EXAMPLE: <code>mv /tmp/initramfs /boot/initramfs-debian-sources-x86_64-6.12.20_p1</code><br>
                            <br>
                            <code>ego boot</code><br>
                            <br>

                            <b>18. Leaving the chroot</b><br>
                            <br>

                            <code>exit</code><br>
                            <code>cd /mnt</code><br>
                            <code>umount -lR funtoo</code><br>
                            <code>reboot</code><br>
                            <br>

                            <b>19. Configure your new system</b><br>
                            <br>

                            <code>su -</code><br>
                            <br>
                            <code>nano /etc/conf.d/xdm</code><br>
                            <br>
                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span
                                            class="admonitionIcon_kALy">📢</span>Display manager setup</div>
                                    <div class="admonitionContent_S0QG">
                                        DISPLAYMANAGER="gdm"<br>
                                    </div>
                                </div>
                            </div>
                            <br>


                            <code>rc-update add dbus default</code><br>
                            <code>rc-update add elogind default</code><br>
                            <br>
                            <code>reboot</code><br>
                            <br>

                            <b>20. The end</b><br>
                            <br>

                            OPTIONAL: <code>/etc/init.d/xdm start</code><br>

                            OPTIONAL: <code>rc-update add xdm default</code><br>
                            <br>


                            <hr>

                            <h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stages">Links to Stages<a
                                    href="#stages" class="hash-link" aria-label="Direct link to stages"
                                    title="Direct link to stages">​</a></h2>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>GNOME
                                    </div>
                                    <div class="admonitionContent_S0QG">
                                        <b>Find all our gnomes stages 3 below.<br>
                                            Four Subarches are available: amd64-zen,amd64-zen2,amd64-zen3 and
                                            generic_64</b><br>
                                    </div>
                                </div>
                            </div>

                            <br>
                            <b>Gnome AMD x64 Zen:</b><br>
                            <code>wget https://github.com/BlakaDivin/metro/releases/download/amd64-2/gnome-light-workstation-2-stage3-amd64-zen-next-2025-04-27.tar.xz</code><br><br>

                            <b>Gnome AMD x64 Zen 2:</b><br>
                            <code>wget https://github.com/BlakaDivin/metro/releases/download/amd64/gnome-light-workstation-2-stage3-amd64-zen2-next-2025-04-26.tar.xz</code><br><br>

                            <b>Gnome AMD x64 Zen 3:</b><br>
                            <code>wget https://github.com/BlakaDivin/metro/releases/download/amd64-1/gnome-light-workstation-2-stage3-amd64-zen3-next-2025-04-27.tar.xz</code><br><br>

                            <b>Gnome Generic x64:</b><br>
                            <code>wget https://github.com/BlakaDivin/metro/releases/download/generic64/gnome-light-workstation-2-stage3-generic_64-next-2025-04-27.tar.xz</code><br><br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>BASIC
                                    </div>
                                    <div class="admonitionContent_S0QG">
                                        <b>Find all our basics stages 3 (without Desktop environment) below.<br>
                                            One subarch is available: generic_64</b><br>
                                    </div>
                                </div>
                            </div>

                            <br>
                            <b>Basic Generic x64:</b><br>
                            <code>wget https://github.com/funtoo-stages/generic_64/releases/download/2025-04-23/stage3-generic_64-next-2025-04-23.tar.xz</code><br><br>
                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>LXD
                                    </div>
                                    <div class="admonitionContent_S0QG">
                                        <b>Find all our LXD stages (For containers) below.<br>
                                            One subarch is available: generic_64</b><br>
                                    </div>
                                </div>
                            </div>

                            <br>
                            <b>LXD Generic x64:</b><br>
                            <code>wget https://github.com/funtoo-stages/generic_64/releases/download/2025-04-23/lxd-generic_64-next-2025-04-23.tar.xz</code><br><br>
                            <hr>

                            <h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bdfl">Become your own BDFL<a
                                    href="#bdfl" class="hash-link" aria-label="Direct link to bdfl"
                                    title="Direct link to bdfl">​</a></h2>
                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span
                                            class="admonitionIcon_kALy">📢</span>ansible playbook</div>
                                    <div class="admonitionContent_S0QG">


                                        "Taste what the daily job of BDFL looks like!"
                                        <br>
                                        -Borisp, 17 March 2024.
                                    </div>
                                </div>
                            </div>

                            <br>

                            This ansible playbook will help you to create a local Funtoo Linux infrastructure setup.<br>
                            After the execution of this ansible playbook you will have 3 running lxd container.
                            <br>
                            <br>
                            <b>What is all about?</b>
                            <br>
                            1. Create and use your own local Funtoo infrastructure.<br>
                            2. Create and use your own Funtoo Linux tar images.<br>
                            3. Create, regenerate and use your own Funtoo Meta-Repo tree.<br>
                            4. Use the local repos for development tasks.<br>
                            <br>

                            Playbook link: <code>https://github.com/org-tekeli-borisp/ansible-funtoo</code><br>
                            <hr>

                            <h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="metro">Using Metro to build
                                Stages<a href="#metro" class="hash-link" aria-label="Direct link to metro"
                                    title="Direct link to metro">​</a></h2>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>Metro
                                    </div>
                                    <div class="admonitionContent_S0QG">


                                        Metro is used to build Stages.<br>
                                        See very basic usage below.<br>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <code>su -</code> or <code>sudo -i</code><br>
                            <br>
                            <code>cd /root</code><br>
                            <br>
                            <code>git clone https://github.com/funtoo-src/metro</code><br>
                            <br>
                            <code>emerge -av dev-python/lxml dev-python/requests</code><br>
                            <br>

                            <code>cp /root/metro/metro.conf /root/.metro</code><br>
                            <br>

                            Then you launch the setup to select your seed:<br>
                            <br>

                            <code>/root/metro/scripts/setup</code><br>
                            <br>

                            Then you can build your own stage file with any subarch and using freshen or full:<br>
                            <br>

                            EXAMPLE 1:
                            <code>export EGO_SYNC_BASE_URL="https://github.com/funtoo-repo/{repo}" && metro/scripts/ezbuild.sh next x86-64bit amd64-zen2 freshen+gnome-light-workstation</code><br>

                            <br>
                            EXAMPLE 2:
                            <code>export EGO_SYNC_BASE_URL="https://github.com/funtoo-repo/{repo}" && metro/scripts/ezbuild.sh next x86-64bit amd64-zen2 full+gnome-light-workstation</code><br>

                            <br>
                            EXAMPLE 3:
                            <code>export EGO_SYNC_BASE_URL="https://github.com/funtoo-repo/{repo}" && metro/scripts/ezbuild.sh next x86-64bit generic_64 freshen+lxd</code>
                            <hr>

                            <h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="package">Adding Packages<a
                                    href="#package" class="hash-link" aria-label="Direct link to package"
                                    title="Direct link to package">​</a></h2>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span
                                            class="admonitionIcon_kALy">📢</span>Packages</div>
                                    <div class="admonitionContent_S0QG">


                                        We recommend you to use Flatpaks.<br>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <b>1. Installing Flatpak App</b><br>
                            <br>

                            <code>ego sync && emerge -av =sys-fs/fuse-2.9.9 flatpak</code><br>
                            <br>
                            <code>flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo</code><br>
                            <br>


                            <code>reboot</code><br>
                            <br>

                            <b>2. Installing Flatpak Packages</b><br>
                            <br>

                            <code>flatpak install flathub org.mozilla.firefox</code><br>
                            <br>
                            <code>flatpak install flathub org.filezillaproject.Filezilla</code><br>
                            <br>
                            <code>flatpak install flathub org.gnome.Rhythmbox3</code><br>
                            <br>
                            <code>flatpak install flathub org.videolan.VLC</code><br>
                            <br>
                            <code>flatpak install flathub org.libreoffice.LibreOffice</code><br>
                            <br>
                            <code>flatpak install flathub org.adishatz.Screenshot</code><br>
                            <br>
                            <code>flatpak install flathub org.gimp.GIMP</code><br>
                            <br>
                            <code>flatpak install flathub com.obsproject.Studio</code><br>
                            <br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>More
                                        Flatpaks</div>
                                    <div class="admonitionContent_S0QG">


                                        Visit: <code>https://flathub.org/</code>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <b>3. Uninstalling Flatpak Packages</b><br>
                            <br>

                            EXAMPLE: <code>flatpak uninstall vlc</code><br>
                            <br>

                            <b>4. Updating Flatpak Packages</b><br>
                            <br>

                            <code>flatpak update</code><br>
                            <br>
                            <hr>

                            <h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="container">LXD/Setting Containers<a
                                    href="#container" class="hash-link" aria-label="Direct link to container"
                                    title="Direct link to container">​</a></h2>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>LXD
                                    </div>
                                    <div class="admonitionContent_S0QG">
                                        LXD is a container "hypervisor" designed to provide an easy set of tools to
                                        manage Linux containers.<br>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <b>Installation:</b><br><br>

                            <code>emerge -a lxd</code>
                            <br><br>
                            <code>rc-update add lxd default</code><br><br>

                            <code>gedit /etc/security/limits.conf</code><br><br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span
                                            class="admonitionIcon_kALy">📢</span>/etc/security/limits.conf
                                    </div>
                                    <div class="admonitionContent_S0QG">
                                        *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; soft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        nofile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1048576<br>
                                        *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hard&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        nofile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1048576<br>
                                        root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        soft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        nofile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1048576<br>
                                        root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        hard&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        nofile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1048576<br>
                                        *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; soft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        memlock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unlimited<br>
                                        *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        hard&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        memlock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unlimited<br>
                                        # End of file<br>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <code>gedit /etc/subuid</code>
                            <br>
                            <br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>
                                        /etc/subuid</div>
                                    <div class="admonitionContent_S0QG">


                                        root:1000000:1000000000
                                    </div>
                                </div>
                            </div>
                            <br>

                            <code>gedit /etc/subgid</code>
                            <br>
                            <br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>
                                        /etc/subgid </div>
                                    <div class="admonitionContent_S0QG">


                                        root:1000000:1000000000
                                    </div>
                                </div>
                            </div>
                            <br>

                            <b>Initialization:</b><br><br>
                            <code>/etc/init.d/lxd start</code><br><br>

                            <code>lxd init</code><br><br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span> LXD
                                        Settings </div>
                                    <div class="admonitionContent_S0QG">


                                        Would you like to use LXD clustering? (yes/no) [default=no]: ↵<br>
                                        Do you want to configure a new storage pool? (yes/no) [default=yes]: ↵<br>
                                        Name of the new storage pool [default=default]: ↵<br>
                                        Name of the storage backend to use (btrfs, dir, lvm) [default=btrfs]: dir ↵<br>
                                        Would you like to connect to a MAAS server? (yes/no) [default=no]: ↵<br>
                                        Would you like to create a new local network bridge? (yes/no) [default=yes]:
                                        ↵<br>
                                        What should the new bridge be called? [default=lxdbr0]: ↵<br>
                                        What IPv4 address should be used? (CIDR subnet notation, “auto” or “none”)
                                        [default=auto]: ↵<br>
                                        What IPv6 address should be used? (CIDR subnet notation, “auto” or “none”)
                                        [default=auto]: none ↵<br>
                                        Would you like LXD to be available over the network? (yes/no) [default=no]:
                                        ↵<br>
                                        Would you like stale cached images to be updated automatically? (yes/no)
                                        [default=yes] ↵<br>
                                        Would you like a YAML "lxd init" preseed to be printed? (yes/no) [default=no]:
                                        ↵<br>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <b>Create your first Container:</b><br><br>

                            <code>cd /</code><br><br>
                            <code>wget https://github.com/funtoo-stages/generic_64/releases/download/2025-04-23/lxd-generic_64-next-2025-04-23.tar.xz</code><br><br>

                            <code>lxc image import lxd-generic_64-next-2025-04-23.tar.xz --alias funtoo</code><br><br>

                            <code>lxc launch funtoo YourContainerName</code><br><br>

                            <code>lxc list</code><br><br>

                            <b>Enter your Container:</b><br><br>
                            <code>lxc exec YourContainerName -- /bin/bash</code><br><br>



                            <b>Delete container if needed:</b><br><br>
                            <code>lxc stop YourContainerName</code><br><br>
                            <code>lxc delete YourContainerName</code><br><br>

                            <b>Delete image if needed:</b><br><br>
                            <code>lxc image delete funtoo</code><br>
                            <br>


                            <h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="laptop">LXD/Laptop Network Setup<a
                                    href="#laptop" class="hash-link" aria-label="Direct link to laptop"
                                    title="Direct link to laptop">​</a></h2>


                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>
                                        WARNING!</div>
                                    <div class="admonitionContent_S0QG">

                                        Special setup is required on a laptop when you are using WiFi. Without special
                                        steps, LXD will cause a conflict with the default route on your system which is
                                        managed by NetworkManager.
                                    </div>
                                </div>
                            </div>
                            <br>


                            <b>Create the following file on your laptop:</b><br><br>

                            <code>gedit /etc/conf.d/netif.brwan</code><br><br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>
                                        /etc/conf.d/netif.brwan</div>
                                    <div class="admonitionContent_S0QG">

                                        template="bridge"<br>
                                        ipaddrs="10.0.30.1/24"<br>
                                    </div>
                                </div>
                            </div>
                            <br>

                            <b>Now, let's enable this bridge:</b><br><br>

                            <code>cd /etc/init.d</code><br><br>
                            <code>ln -s netif.tmpl netif.brwan</code><br><br>
                            <code>rc-update add netif.brwan default</code><br><br>
                            <code>reboot</code><br><br>

                            <b>New Bridge In, Old Bridge Out:</b><br><br>

                            <code>/etc/init.d/lxd restart</code><br><br>

                            <code>lxc network list</code><br><br>

                            <code>lxc profile edit default</code><br><br>


                            <b>Remember that this is YAML which expects indents to consist of two spaces -- not tabs:
                            </b><br><br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>
                                        Edit the file</div>
                                    <div class="admonitionContent_S0QG">

                                        eth0:<br>
                                        name:&nbsp; eth0<br>
                                        nictype:&nbsp; bridged<br>
                                        parent:&nbsp; brwan<br>
                                        type:&nbsp; nic<br>

                                    </div>
                                </div>
                            </div>
                            <br>

                            <code>lxc network delete lxdbr0</code><br><br>

                            <b>Enter a container:</b><br><br>

                            <code>lxc exec YourContainerName -- /bin/bash</code><br><br>

                            <code>cd /etc/conf.d</code><br><br>
                            <code>nano netif.eth0</code><br><br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>
                                        /etc/conf.d/netif.eth0</div>
                                    <div class="admonitionContent_S0QG">

                                        template='interface'<br>
                                        ipaddrs='10.0.30.2/24'<br>
                                        gateway='10.0.30.1'<br>
                                        nameservers='1.1.1.1 1.0.0.1'<br>

                                    </div>
                                </div>
                            </div>
                            <br>

                            <b>We are setting the container's IP address to 10.0.30.2</b><br><br>

                            <b>Now, let's start this network:</b><br><br>

                            <code>cd /etc/init.d</code><br>
                            <code>ln -s netif.tmpl netif.eth0</code><br>
                            <code>rc-update add netif.eth0 default</code><br>
                            <code>exit</code><br>
                            <code>lxc restart YourContainerName</code><br>
                            <code>lxc list</code><br><br>

                            <b>Enter your container and try Ping:</b><br><br>

                            <code>lxc exec YourContainerName -- /bin/bash</code><br>
                            <code>ping 10.0.30.1</code><br><br>

                            <code>exit</code><br><br>

                            <b>We'll now set up IP Masquerading. This is done on the host:</b><br><br>

                            <code>gedit /etc/local.d/masquerade.start</code>
                            <br><br>

                            (Below, I am using wlan0 below, because this is the interface on my laptop)<br><br>

                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>
                                        /etc/local.d/masquerade.start</div>
                                    <div class="admonitionContent_S0QG">

                                        /sbin/iptables -t nat -A POSTROUTING -o wlan0 -j MASQUERADE<br>
                                        echo 1 > /proc/sys/net/ipv4/ip_forward<br>

                                    </div>
                                </div>
                            </div>
                            <br>

                            <b>Make it executable -- and run it just this once. It will get automatically run when your
                                system starts in the future:</b><br><br>

                            <code>chmod +x masquerade.start</code><br><br>
                            <code>./masquerade.start</code><br><br>


                            <b>Now you can enter your container and ping things on the internet:</b><br><br>

                            <code>lxc exec YourContainerName -- /bin/bash</code><br><br>
                            <code>ping www.yahoo.com</code><br><br>

                            <b>Add DHCP Daemon:</b><br><br>

                            <code>emerge dnsmasq</code><br><br>

                            <code>gedit /etc/dnsmasq.conf</code><br><br>


                            <div class="theme-doc-markdown markdown">
                                <div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
                                    <div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy">📢</span>
                                        /etc/dnsmasq.conf </div>
                                    <div class="admonitionContent_S0QG">

                                        interface=brwan<br>
                                        dhcp-range=10.0.30.2,10.0.30.254,12h<br>

                                    </div>
                                </div>
                            </div>
                            <br>
                            <code>rc-update add dnsmasq default</code><br><br>
                            <code>reboot</code><br><br>
                            <hr>


                    </article>
                </div>
            </div>
            <div class="col col--3">
                <div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop">
                    <ul class="table-of-contents table-of-contents__left-border">

                        <li><a href="#update" class="table-of-contents__link toc-highlight">Update and Upgrade</a>
                        </li>
                        <li><a href="#install" class="table-of-contents__link toc-highlight">Installation</a>
                        </li>
                        <li><a href="#stages" class="table-of-contents__link toc-highlight">Links to Stages</a>
                        </li>
                        <li><a href="#bdfl" class="table-of-contents__link toc-highlight">Become your own BDFL</a>
                        </li>
                        <li><a href="#metro" class="table-of-contents__link toc-highlight">Using Metro to build
                                Stages</a>
                        </li>
                        <li><a href="#package" class="table-of-contents__link toc-highlight">Adding Packages</a>
                        </li>
                        <li><a href="#container" class="table-of-contents__link toc-highlight">LXD/Setting
                                Containers</a>
                        </li>
                        <li><a href="#laptop" class="table-of-contents__link toc-highlight">LXD/Laptop Network</a>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
    </div>
</main>
<footer class="footer footer--dark">
    <div class="container container-fluid">
        <div class="row footer__links">
        Those who are wise lament neither for the living nor the dead. -Krishna <br>
        All living entities, are seated as on a machine, made of the material energy. -Krishna<br>
        Live by regulating the senses, and slay this destroyer of knowledge and self-realization. -Krishna<br>
        The mode of passion is born of unlimited desires and longings, bound to material fruitive activities. -Krishna
        </div>
        <div class="footer__bottom text--center">
            <div class="footer__copyright">Copyright 2025 @ BlakaDivin.</div>
        </div>
    </div>
</footer>
</body>
